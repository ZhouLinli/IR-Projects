---
title: "Review Core Curriculum"
author: ""
date: ""
output: 
  word_document:
    reference_docx: /Users/linlizhou/Documents/Rprojects/lasell.report.IN-USE.docx
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
source("/Users/linlizhou/Documents/Rprojects/IR-Projects/theme_source.R") #run code from saved theme and library
```




#Reporting Items

1. For each term (fall/spring): # courses/ sections offered in each core segment -- SECTION TALLY
2. For each term (fall/spring): # registration in each core segment -- SECTION TALLY 

3.  % of pass, C or better, and Withdrawal; Average GPA (and SD) of each courses -- STU INFO BY COURSE
4. All core course enrollment and transfer proportion -- deduplicated student count in STU INFO BY COURSE

5. All core course retention -- STARFISH RETENTION REPORT
6. course-taking sequence -- 2018 COHORT BY GRADUATION IN 2022 OR NOT -- POWERCAMPUS TRANSCRIPT

```{r list of core courses}
corelist<-tibble(
CourseCode=c("WRT101","WRT102",
              "MATH106","MATH107","MATH116","MATH202","MATH203","MATH203","MATH205","MATH208","MATH209",
              "FYS103","HON101",
              "MDSC203", "HON205",
              "PHIL302",
              "ARTH107", "ARTS106", "ARTS126", "ARTS205", "ENG210", "ENG217", "ENG218", "ENG225", "MUS101", "MUS102", "MUS109", "MUS203", "PERF107", "PERF111","PERF202", "PERF203",
              "HIST104",
              "SOC104","ANTH101", "CJ101", "COM103", "ENV101", "LS101", "PSYC101", "SOC101", "SOC102",
              "BIO101", "BIO102", "BIO107", "BIO113", "CHEM105", "CHEM203", "ENV206", "ENV211", "ENV220", "MATH109", "PHYS111", "PHYS112", "SCI103", "SCI104", "SCI105", "SCI106", "SCI107", "SCI114", "SCI115", "SCI117", "SCI118", "SCI119",
              "BIO420","BUSS497","CHEM407","COM400","CJ443","CJ444","DSCI499","ED496","ED498","ED482","ED484","ED427","EXSC410","EXSC425","FASH415","FSCI407","GRAP400","HS415","HS425","HUM400","LS443","LS444",
              "BIO430","BUSS440","CJ441","CJ442","COM495","DSCI409","ED494","ENG402","EXSC430","FASH427","FSCI480","GLBS401","GRAP404","HIST401","HS427","HUM419","HUM420","LS441","LS442","MATH399")) %>%
  
  mutate(CourseGroup=case_when(
    CourseCode%in%c("WRT101","WRT102") ~"Writing",
    CourseCode%in%c("MATH106","MATH107","MATH116","MATH202","MATH203","MATH203","MATH205","MATH208","MATH209") ~"Math",
    CourseCode%in%c("FYS103","HON101")  ~ "FYS",
    CourseCode%in%c("MDSC203", "HON205")  ~ "Multidisciplinary",
    CourseCode%in%c("PHIL302")  ~ "PHIL302",
    
    CourseCode%in%c("ARTH107", "ARTS106", "ARTS126", "ARTS205", "ENG210", "ENG217", "ENG218", "ENG225", "MUS101", "MUS102", "MUS109", "MUS203", "PERF107", "PERF111","PERF202", "PERF203")  ~ "Aesthetics & Creativity",
    
    CourseCode%in%c("HIST104")  ~ "Global & Historical",
    
    CourseCode%in%c("SOC104","ANTH101", "CJ101", "COM103", "ENV101", "LS101", "PSYC101", "SOC101", "SOC102")  ~ "Individuals & Society",
    
# added the last few; and removed:  "SCI117", "SCI118", "SCI119","MATH109", "SCI107"    
CourseCode%in%c("BIO101", "BIO102", "BIO107", "BIO113", "CHEM105", "CHEM203", "ENV206", "ENV211", "ENV220", "PHYS111", "PHYS112", "SCI103", "SCI104", "SCI105", "SCI106", "SCI114", "SCI115", "BIO117","BIO207","CHEM118","ENV101","PHYS107","PHYS108")  ~ "Scientific Inquiry & Problem Solving",

    CourseCode%in%c("BIO420","BUSS497","CHEM407","COM400","CJ443","CJ444","DSCI499","ED496","ED498","ED482","ED484","ED427","EXSC410","EXSC425","FASH415","FSCI407","GRAP400","HS415","HS425","HUM400","LS443","LS444")  ~ "Internship",
    CourseCode%in%c("BIO430","BUSS440","CJ441","CJ442","COM495","DSCI409","ED494","ENG402","EXSC430","FASH427","FSCI480","GLBS401","GRAP404","HIST401","HS427","HUM419","HUM420","LS441","LS442","MATH399")  ~ "Capstone"))

#Scientific Inquiry & Problem Solving KP
sectiontally%>%filter(grepl("^SCI|^BIO|^CHEM|^ENV|^MATH|^PHYS",event_id),
                      grepl("KP$",section)) %>%
count(event_id)

#
```

```{r load crs data}
#download section tally for 2018 Fall, 2019 Spring, 2019 Fall, 2020 Spring, 2020 Fall, 2021 Spring, 2021 Fall, 2022 Spring
# var needed: coursecodes, sectiontimes, student enrollment, student grades

fa18.sec<-read_csv("/Volumes/lasellshare/Faculty_Staff_Shares$/IR/Data and Analyses/Program Review/2022 Core Curriculum/data files/Section Tally18fall.csv",skip = 2)%>%mutate(term="2018 Fall")
sp19.sec<-read_csv("/Volumes/lasellshare/Faculty_Staff_Shares$/IR/Data and Analyses/Program Review/2022 Core Curriculum/data files/Section Tally19sp.csv",skip = 2)%>%mutate(term="2019 Spring")
  
fa19.sec<-read_csv("/Volumes/lasellshare/Faculty_Staff_Shares$/IR/Data and Analyses/Program Review/2022 Core Curriculum/data files/Section Tally19fall.csv",skip = 2)%>%mutate(term="2019 Fall")
sp20.sec<-read_csv("/Volumes/lasellshare/Faculty_Staff_Shares$/IR/Data and Analyses/Program Review/2022 Core Curriculum/data files/Section Tally20sp.csv",skip = 2)%>%mutate(term="2020 Spring")

fa20.sec<-read_csv("/Volumes/lasellshare/Faculty_Staff_Shares$/IR/Data and Analyses/Program Review/2022 Core Curriculum/data files/Section Tally20fall.csv",skip = 2)%>%mutate(term="2020 Fall")
sp21.sec<-read_csv("/Volumes/lasellshare/Faculty_Staff_Shares$/IR/Data and Analyses/Program Review/2022 Core Curriculum/data files/Section Tally21sp.csv",skip = 2)%>%mutate(term="2021 Spring")

fa21.sec<-read_csv("/Volumes/lasellshare/Faculty_Staff_Shares$/IR/Data and Analyses/Program Review/2022 Core Curriculum/data files/Section Tally21fall.csv",skip = 2)%>%mutate(term="2021 Fall")
sp22.sec<-read_csv("/Volumes/lasellshare/Faculty_Staff_Shares$/IR/Data and Analyses/Program Review/2022 Core Curriculum/data files/Section Tally22sp.csv",skip = 2)%>%mutate(term="2022 Spring")

#merge
sectiontally<-plyr::join_all(list(fa18.sec,sp19.sec,fa19.sec,sp20.sec,fa20.sec,sp21.sec,fa21.sec,sp22.sec),type="full")

#only keep core courses
sectiontally%>%filter(sectiontally$event_id %in% corelist$CourseCode)%>%count(event_id)
```

```{r load student data}
# download stu info by course for 18-19,19-20,20-21,21-22
# var needed: core course students' transfer status, unduplicated total enroll
crs18_19<-read_csv("/Volumes/lasellshare/Faculty_Staff_Shares$/IR/Data and Analyses/Program Review/2022 Core Curriculum/data files/Student Info by Course and Fiscal Year18-19.csv")
crs19_20<-
crs20_21<-
crs21_22<-
```









